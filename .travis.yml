language: common-lisp
sudo: required
os:
  - linux
  - osx

env:
  matrix:
    - LISP=sbcl-bin
    - LISP=ccl-bin

install:
  - if [ "$TRAVIS_OS_NAME" = linux ]; then sudo apt-get install clang; fi
  - if [ "$TRAVIS_OS_NAME" = linux ]; then sudo apt-get install libedit-dev; else brew install libedit; fi
  - curl -L https://raw.githubusercontent.com/snmsts/roswell/release/scripts/install-for-ci.sh | sh

script:
  - make LISP='ros -s cffi-grovel run --'
  - echo -shcl-run-tests | ./shcl
